% Установка кодировки UTF-8
:- set_prolog_flag(encoding, utf8).

% Определяем отношения "родитель"
родитель(джон, боб).
родитель(мери, боб).
родитель(боб, лиз).
родитель(боб, паул).
родитель(боб, сэм).
родитель(сэм, пат).
родитель(мери, энн).

% Определяем пол
мужчина(джон).
мужчина(боб).
мужчина(паул).
мужчина(сэм).
мужчина(пат).

женщина(мери).
женщина(энн).
женщина(лиз).

% Определяем отношения "отец" и "мать"
отец(X, Y) :- родитель(X, Y), мужчина(X).
мать(X, Y) :- родитель(X, Y), женщина(X).

% Определяем отношения "брат" и "сестра"
брат(X, Y) :- родитель(Z, X), родитель(Z, Y), мужчина(X), X \= Y.
сестра(X, Y) :- родитель(Z, X), родитель(Z, Y), женщина(X), X \= Y.

% Определяем отношения "внук" и "внучка"
внук(X, Y) :- родитель(Z, X), родитель(Y, Z), мужчина(X).
внучка(X, Y) :- родитель(Z, X), родитель(Y, Z), женщина(X).

% Определяем отношение "тётя"
тётя(X, Y) :- сестра(X, Z), родитель(Z, Y).

% Определяем "иметь двух детей"
имеет_двух_детей(X) :- родитель(X, Y1), родитель(X, Y2), Y1 \= Y2.

% Определяем "продолжатель рода"
продолжатель_рода(X) :- мужчина(X), родитель(X, Y), мужчина(Y).

% Определяем "имеет мать"
имеет_мать(X) :- мать(_, X).

%  Задайте вопросы и получите ответы в Пролог-системе: 
%  а) Кто отец Сэма?                                             
%  б) Есть ли мать у Боба? (ответ должен быть true) 
%  в) Кто сестра Сэма? 
%  г) Есть ли сестра у Лиз? 
%  д) Кто брат Боба? 
%  е) Кто внуки Мэри? 
%  ж) Чей внук Паул? 
%  з) Кто тетя Сэма? 
%  и) Есть ли племянники у Энн? 
%  к) У кого ровно двое детей? (Пролог-система должна находить только Мэри, и, 
%  причем, только один раз). 
%  л) Боб - продолжатель рода? 

start :-
    % а) Кто отец Сэма?
    отец(FatherSam, сэм),
    write('а) Отец Сэма: '), write(FatherSam), nl,

    % б) Есть ли мать у Боба?
    (имеет_мать(боб) -> write('б) У Боба есть мать: true'); write('б) У Боба нет матери: false')), nl,

    % в) Кто сестра Сэма?
    (сестра(SisterSam, сэм) -> write('в) Сестра Сэма: '), write(SisterSam), nl ; write('в) У Сэма нет сестры'), nl),

    % г) Есть ли сестра у Лиз?
    (сестра(_, лиз) -> write('г) У Лиз есть сестра: true'), nl ; write('г) У Лиз нет сестры: false'), nl),

    % д) Кто брат Боба?
    (брат(BrotherBob, боб) -> write('д) Брат Боба: '), write(BrotherBob), nl ; write('д) У Боба нет брата'), nl),

    % е) Кто внуки Мэри?
    findall(GrandchildMary, (внук(GrandchildMary, мери); внучка(GrandchildMary, мери)), GrandchildrenMary),
    write('е) Внуки Мэри: '), write(GrandchildrenMary), nl,

    % ж) Чей внук Паул?
    (внук(паул, GrandparentPaul) -> write('ж) Паул - внук: '), write(GrandparentPaul), nl ; write('ж) У Паула нет бабушки/дедушки'), nl),

    % з) Кто тетя Сэма?
    (тётя(AuntSam, сэм) -> write('з) Тётя Сэма: '), write(AuntSam), nl ; write('з) У Сэма нет тети'), nl),

    % и) Есть ли племянники у Энн?
    (брат(BrotherAnn, энн), родитель(BrotherAnn, NephewAnn) -> write('и) У Энн есть племянники: true'), nl ; write('и) У Энн нет племянников: false'), nl),

    % к) У кого ровно двое детей?
    (имеет_двух_детей(TwoChildren), write('к) Имеет ровно двух детей: '), write(TwoChildren), nl ; write('к) Никто не имеет ровно двух детей'), nl),

    % л) Боб - продолжатель рода?
    (продолжатель_рода(боб) -> write('л) Боб - продолжатель рода: true'), nl ; write('л) Боб не является продолжателем рода'), nl).